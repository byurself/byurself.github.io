<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Golang学习笔记 | byu_rself</title><meta name="author" content="byu_rself"><meta name="copyright" content="byu_rself"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="视频学习链接：https:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV1gf4y1r79E&#x2F;?p&#x3D;1&amp;vd_source&#x3D;21e06970a09504e227f7f3380f7cb09c Golang学习笔记Golang简介Golang的优势   123456789101112131415161718package main  import (    &quot;fmt&amp;quot">
<meta property="og:type" content="article">
<meta property="og:title" content="Golang学习笔记">
<meta property="og:url" content="https://byurself.github.io/byu_rself/af4eacf0.html">
<meta property="og:site_name" content="byu_rself">
<meta property="og:description" content="视频学习链接：https:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV1gf4y1r79E&#x2F;?p&#x3D;1&amp;vd_source&#x3D;21e06970a09504e227f7f3380f7cb09c Golang学习笔记Golang简介Golang的优势   123456789101112131415161718package main  import (    &quot;fmt&amp;quot">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://byurself.github.io/img/avatar.jpg">
<meta property="article:published_time" content="2023-04-16T07:31:34.000Z">
<meta property="article:modified_time" content="2023-05-27T15:27:55.962Z">
<meta property="article:author" content="byu_rself">
<meta property="article:tag" content="Golang">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://byurself.github.io/img/avatar.jpg"><link rel="shortcut icon" href="/img/logo.jpg"><link rel="canonical" href="https://byurself.github.io/byu_rself/af4eacf0.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: byu_rself","link":"链接: ","source":"来源: byu_rself","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Golang学习笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-05-27 23:27:55'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/loading.gif" data-original="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">583</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">104</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">17</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="byu_rself"><span class="site-name">byu_rself</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Golang学习笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-04-16T07:31:34.000Z" title="发表于 2023-04-16 15:31:34">2023-04-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-05-27T15:27:55.962Z" title="更新于 2023-05-27 23:27:55">2023-05-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%90%8E%E7%AB%AF/Golang/">Golang</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">9.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>43分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Golang学习笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>视频学习链接：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1gf4y1r79E/?p=1&vd_source=21e06970a09504e227f7f3380f7cb09c">https://www.bilibili.com/video/BV1gf4y1r79E/?p=1&amp;vd_source=21e06970a09504e227f7f3380f7cb09c</a></p>
<h1 id="Golang学习笔记"><a href="#Golang学习笔记" class="headerlink" title="Golang学习笔记"></a>Golang学习笔记</h1><h2 id="Golang简介"><a href="#Golang简介" class="headerlink" title="Golang简介"></a>Golang简介</h2><h3 id="Golang的优势"><a href="#Golang的优势" class="headerlink" title="Golang的优势"></a>Golang的优势</h3><p><img src="/img/loading.gif" data-original="/../images/Go/Golang%E4%BC%98%E5%8A%BF.png" alt="Golang优势"></p>
<p><img src="/img/loading.gif" data-original="/../images/Go/%E9%9D%99%E6%80%81%E7%B1%BB%E5%9E%8B%E8%AF%AD%E8%A8%80.png" alt="静态类型语言"></p>
<p><img src="/img/loading.gif" data-original="/../images/Go/%E8%AF%AD%E8%A8%80%E5%B1%82%E9%9D%A2%E7%9A%84%E5%B9%B6%E5%8F%91.png" alt="语言层面的并发"></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">goFunc</span><span class="params">(i <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;goroutine &quot;</span>, i, <span class="string">&quot; ...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">go</span> goFunc(i) <span class="comment">//开启一个并发协程</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    time.Sleep(time.Second)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/img/loading.gif" data-original="/../images/Go/%E5%BC%BA%E5%A4%A7%E7%9A%84%E6%A0%87%E5%87%86%E5%BA%93.png" alt="强大的标准库"></p>
<p><img src="/img/loading.gif" data-original="/../images/Go/%E6%A0%87%E5%87%86%E5%BA%93.png" alt="标准库"></p>
<p><img src="/img/loading.gif" data-original="/../images/Go/%E7%AE%80%E5%8D%95%E6%98%93%E5%AD%A6.png" alt="简单易学"></p>
<p><img src="/img/loading.gif" data-original="/../images/Go/%E5%A4%A7%E5%8E%82%E9%A2%86%E5%86%9B.png" alt="大厂领军"></p>
<h3 id="Golang适合做什么"><a href="#Golang适合做什么" class="headerlink" title="Golang适合做什么"></a>Golang适合做什么</h3><p><strong>(1)、云计算基础设施领域</strong></p>
<p>代表项目：docker、kubernetes、etcd、consul、cloudflare CDN、七牛云存储等。</p>
<p><strong>(2)、基础后端软件</strong></p>
<p>代表项目：tidb、influxdb、cockroachdb等。</p>
<p><strong>(3)、微服务</strong></p>
<p>代表项目：go-kit、micro、monzo bank的typhon、bilibili等。</p>
<p><strong>(4)、互联网基础设施</strong></p>
<p>代表项目：以太坊、hyperledger等。</p>
<h3 id="Golang明星作品"><a href="#Golang明星作品" class="headerlink" title="Golang明星作品"></a>Golang明星作品</h3><p><img src="/img/loading.gif" data-original="/../images/Go/%E6%98%8E%E6%98%9F%E4%BD%9C%E5%93%81docker.png" alt="明星作品docker"></p>
<p><img src="/img/loading.gif" data-original="/../images/Go/%E6%98%8E%E6%98%9F%E4%BD%9C%E5%93%81k8s.png" alt="明星作品k8s"></p>
<p><img src="/img/loading.gif" data-original="/../images/Go/GitHub%E7%82%B9%E8%B5%9E.png" alt="GitHub点赞"></p>
<h3 id="Golang的不足"><a href="#Golang的不足" class="headerlink" title="Golang的不足"></a>Golang的不足</h3><ol>
<li>包管理，大部分都在<strong>GitHub</strong>上</li>
<li><del>无泛化类型</del>(Golang 1.18+已经支持泛型)</li>
<li>所有<strong>Excepiton</strong>都用<strong>Error</strong>来处理(比较有争议)</li>
<li>对<strong>C</strong>的降级处理，并非无缝，没有<strong>C</strong>降级到<strong>asm</strong>那么完美(序列化问题)</li>
</ol>
<h2 id="Golang语法"><a href="#Golang语法" class="headerlink" title="Golang语法"></a>Golang语法</h2><h3 id="第一个Golang程序"><a href="#第一个Golang程序" class="headerlink" title="第一个Golang程序"></a>第一个Golang程序</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main <span class="comment">// 程序的包名</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">import &quot;fmt&quot;</span></span><br><span class="line"><span class="comment">import &quot;time&quot;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 当要导入多个包时，推荐此方式</span></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span>,</span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// main函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123; <span class="comment">// 函数的 &quot;&#123;&quot; 一定是和函数名在同一行的，否则编译错误</span></span><br><span class="line">	<span class="comment">// Golang中的表达式，加&quot;;&quot;，和不加都可以，建议不加</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;Hello Go!&quot;</span>)</span><br><span class="line">	time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>终端运行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PS D:\Go_Project&gt; go run hello.go</span><br><span class="line">Hello Go!</span><br></pre></td></tr></table></figure>

<p><code>go run</code> 表示 直接编译go语言并执行应用程序，一步完成</p>
<p>也可以先编译，再运行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS D:\Go_Project&gt; go build hello.go</span><br></pre></td></tr></table></figure>

<p>此时在项目中生成可执行文件</p>
<p><img src="/img/loading.gif" data-original="/../images/Go/Go1.png" alt="Go1"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PS D:\Go_Project&gt; ./hello</span><br><span class="line">Hello Go!</span><br></pre></td></tr></table></figure>

<ul>
<li>第一行代码<strong>package main</strong>定义了包名。你必须在源文件中非注释的第一行指明这个文件属于哪个包，如：<code>package main</code>。<code>package main</code>表示一个可独立执行的程序，每个 Go 应用程序都包含一个名为 <code>main</code> 的包。</li>
<li>**import “fmt”**告诉 Go 编译器这个程序需要使用 <code>fmt</code> 包（的函数，或其他元素），<code>fmt</code> 包实现了格式化 IO（输入&#x2F;输出）的函数。</li>
<li><code>func main()</code>是程序开始执行的函数。main 函数是每一个可执行程序所必须包含的，一般来说都是在启动后第一个执行的函数（如果有 <code>init()</code> 函数则会先执行该函数）。</li>
</ul>
<blockquote>
<p><strong>注意：这里面go语言的语法，定义函数的时候，‘{’ 必须和函数名在同一行，不能另起一行。</strong></p>
</blockquote>
<ul>
<li><code>/*...*/ </code>是注释，在程序执行时将被忽略。单行注释是最常见的注释形式，你可以在任何地方使用以 &#x2F;&#x2F; 开头的单行注释。多行注释也叫块注释，均已以 &#x2F; <em>开头，并以</em> &#x2F; 结尾，且不可以嵌套使用，多行注释一般用于包的文档描述或注释成块的代码片段。</li>
<li><code>fmt.Println(...)</code>可以将字符串输出到控制台，并在最后自动增加换行字符 <code>\n</code>。 使用 <code>fmt.Print(&quot;hello, world\n&quot;)</code> 可以得到相同的结果。 <code>Print</code> 和 <code>Println</code> 这两个函数也支持使用变量，如：<code>fmt.Println(arr)</code>。如果没有特别指定，它们会以默认的打印格式将变量 <code>arr</code> 输出到控制台。</li>
</ul>
<h3 id="变量的声明"><a href="#变量的声明" class="headerlink" title="变量的声明"></a>变量的声明</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明全局变量，方法一、二、三是可以的</span></span><br><span class="line"><span class="keyword">var</span> gA <span class="type">int</span></span><br><span class="line"><span class="keyword">var</span> gB <span class="type">int</span> = <span class="number">100</span></span><br><span class="line"><span class="keyword">var</span> gC = <span class="number">200</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用方法四来声明全局变量</span></span><br><span class="line"><span class="comment">// := 只能在函数体内声明</span></span><br><span class="line"><span class="comment">// gD := 100</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 方法一：声明一个变量，默认值是0</span></span><br><span class="line">	<span class="keyword">var</span> a <span class="type">int</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;a = &quot;</span>, a)            <span class="comment">// a = 0</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;type of a = %T\n&quot;</span>, a) <span class="comment">// type of a = int</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 方法二：声明一个变量，初始化一个值</span></span><br><span class="line">	<span class="keyword">var</span> b <span class="type">int</span> = <span class="number">100</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;b = &quot;</span>, b)            <span class="comment">// b = 100</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;type of b = %T\n&quot;</span>, b) <span class="comment">// type of b = int</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> bb <span class="type">string</span> = <span class="string">&quot;abc&quot;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;bb = %s, type of bb = %T\n&quot;</span>, bb, bb) <span class="comment">// bb = abc, type of bb = string</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 方法三：在初始化的时候，可以省去数据类型，通过值自动匹配当前变量的数据类型</span></span><br><span class="line">	<span class="keyword">var</span> c = <span class="number">100</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;c = &quot;</span>, c)            <span class="comment">// c = 100</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;type of c = %T\n&quot;</span>, c) <span class="comment">// type of c = int</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> cc = <span class="string">&quot;abc&quot;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;cc = %s, type of cc = %T\n&quot;</span>, cc, cc) <span class="comment">// cc = abc, type of cc = string</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 方法四：(常用)省去var关键字，直接自动匹配</span></span><br><span class="line">	d := <span class="number">100</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;d = &quot;</span>, d)            <span class="comment">// d = 100</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;type of d = %T\n&quot;</span>, d) <span class="comment">// type of d = int</span></span><br><span class="line"></span><br><span class="line">	e := <span class="string">&quot;abc&quot;</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;e = &quot;</span>, e)            <span class="comment">// e = abc</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;type of e = %T\n&quot;</span>, e) <span class="comment">// type of e = string</span></span><br><span class="line"></span><br><span class="line">	pi := <span class="number">3.14</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;pi = &quot;</span>, pi)            <span class="comment">// pi = 3.14</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;type of pi = %T\n&quot;</span>, pi) <span class="comment">// type of pi = float64</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;===============================&quot;</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;gA = &quot;</span>, gA, <span class="string">&quot;, gB = &quot;</span>, gB, <span class="string">&quot;,gC = &quot;</span>, gC)</span><br><span class="line">	<span class="comment">// fmt.Println(&quot;gD = &quot;, gD)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 声明多个变量</span></span><br><span class="line">	<span class="keyword">var</span> xx, yy <span class="type">int</span> = <span class="number">100</span>, <span class="number">200</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;xx = &quot;</span>, xx, <span class="string">&quot;, yy = &quot;</span>, yy) <span class="comment">// xx = 100 , yy = 200</span></span><br><span class="line">	<span class="keyword">var</span> kk, ll = <span class="number">100</span>, <span class="string">&quot;byu_rself&quot;</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;kk = &quot;</span>, kk, <span class="string">&quot;, ll = &quot;</span>, ll) <span class="comment">// kk =  100 , ll = byu_rself</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 多行的多变量声明</span></span><br><span class="line">	<span class="keyword">var</span> (</span><br><span class="line">		vv <span class="type">int</span>  = <span class="number">100</span></span><br><span class="line">		jj <span class="type">bool</span> = <span class="literal">true</span></span><br><span class="line">	)</span><br><span class="line">	fmt.Println(<span class="string">&quot;vv = &quot;</span>, vv, <span class="string">&quot;, jj = &quot;</span>, jj) <span class="comment">// vv =  100 , jj = true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用const来定义枚举类型</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	<span class="comment">// 可在const()添加一关键字 iota，每行的iota都会累加1，第一行的iota的默认值是0</span></span><br><span class="line">	BEIJING  = <span class="literal">iota</span> <span class="comment">// iota = 0</span></span><br><span class="line">	SHANGHAI             <span class="comment">// iota = 1</span></span><br><span class="line">	NINGBO               <span class="comment">// iota = 2</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	a, b = <span class="literal">iota</span> + <span class="number">1</span>, <span class="literal">iota</span> + <span class="number">2</span> <span class="comment">// iota = 0，a = iota + 1，b = iota + 2, a = 1, b = 2</span></span><br><span class="line">	c, d                      <span class="comment">// iota = 1，c = iota + 1，d = iota + 2, c = 2, d = 3</span></span><br><span class="line">	e, f                      <span class="comment">// iota = 2，e = iota + 1，f = iota + 2, e = 3, f = 4</span></span><br><span class="line">	g, h = <span class="literal">iota</span> * <span class="number">2</span>, <span class="literal">iota</span> * <span class="number">3</span> <span class="comment">// iota = 3，g = iota * 2，h = iota * 3, g = 6, h = 9</span></span><br><span class="line">	i, k                      <span class="comment">// iota = 4，i = iota * 2，k = iota * 3, i = 8, k = 12</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 常量(只读属性)</span></span><br><span class="line">	<span class="keyword">const</span> length <span class="type">int</span> = <span class="number">10</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;length = &quot;</span>, length)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// length = 100 常量是不允许修改的</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;BEIJING = &quot;</span>, BEIJING)</span><br><span class="line">	fmt.Println(<span class="string">&quot;SHANGHAI = &quot;</span>, SHANGHAI)</span><br><span class="line">	fmt.Println(<span class="string">&quot;NINGBO = &quot;</span>, NINGBO)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// iota只能配合const()一起使用</span></span><br><span class="line">	<span class="comment">// var a int = iota</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<blockquote>
<p>length &#x3D;  10<br>BEIJING &#x3D;  0<br>SHANGHAI &#x3D;  1<br>NINGBO &#x3D;  2</p>
</blockquote>
<p>将<code>iota</code>乘$10$后</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	<span class="comment">// 可在const()添加一关键字 iota，每行的iota都会累加1，第一行的iota的默认值是0</span></span><br><span class="line">	BEIJING  = <span class="number">10</span> * <span class="literal">iota</span> <span class="comment">// iota = 0</span></span><br><span class="line">	SHANGHAI             <span class="comment">// iota = 1</span></span><br><span class="line">	NINGBO               <span class="comment">// iota = 2</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<blockquote>
<p>length &#x3D;  10<br>BEIJING &#x3D;  0<br>SHANGHAI &#x3D;  10<br>NINGBO &#x3D;  20</p>
</blockquote>
<p><strong>注意iota“每行”的概念</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	a, b = <span class="literal">iota</span> + <span class="number">1</span>, <span class="literal">iota</span> + <span class="number">2</span> <span class="comment">// iota = 0，a = iota + 1，b = iota + 2, a = 1, b = 2</span></span><br><span class="line">	c, d                      <span class="comment">// iota = 1，c = iota + 1，d = iota + 2, c = 2, d = 3</span></span><br><span class="line">	e, f                      <span class="comment">// iota = 2，e = iota + 1，f = iota + 2, e = 3, f = 4</span></span><br><span class="line">	g, h = <span class="literal">iota</span> * <span class="number">2</span>, <span class="literal">iota</span> * <span class="number">3</span> <span class="comment">// iota = 3，g = iota * 2，h = iota * 3, g = 6, h = 9</span></span><br><span class="line">	i, k                      <span class="comment">// iota = 4，i = iota * 2，k = iota * 3, i = 8, k = 12</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><strong>总结</strong></p>
<ol>
<li><code>const</code>为只读属性，可以用<code>const</code>来定义<strong>枚举</strong>类型</li>
<li><code>iota</code>只能配合<code>const()</code>一起使用</li>
<li><strong>每行</strong>的<code>iota</code>都会累加1，第一行的<code>iota</code>的默认值是0</li>
</ol>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>Go语言中，函数既可以返回单个值，也可以返回多个值</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 单个返回值</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f1</span><span class="params">(a <span class="type">string</span>, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;a = &quot;</span>, a)</span><br><span class="line">	fmt.Println(<span class="string">&quot;b = &quot;</span>, b)</span><br><span class="line"></span><br><span class="line">	c := <span class="number">100</span></span><br><span class="line">	<span class="keyword">return</span> c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 匿名返回多个值</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f2</span><span class="params">(a <span class="type">string</span>, b <span class="type">int</span>)</span></span> (<span class="type">int</span>, <span class="type">int</span>) &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;a = &quot;</span>, a)</span><br><span class="line">	fmt.Println(<span class="string">&quot;b = &quot;</span>, b)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">111</span>, <span class="number">222</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回多个返回值，有形参名的</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f3</span><span class="params">(a <span class="type">string</span>, b <span class="type">int</span>)</span></span> (r1 <span class="type">int</span>, r2 <span class="type">int</span>) &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;a = &quot;</span>, a)</span><br><span class="line">	fmt.Println(<span class="string">&quot;b = &quot;</span>, b)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// r1, r2属于f3的形参,初始化默认值为0</span></span><br><span class="line">	<span class="comment">// r1, r2作用域空间为f3整个函数体&#123;&#125;空间</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;赋值之前: r1 = &quot;</span>, r1, <span class="string">&quot;, r2 = &quot;</span>, r2)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 给有名称的返回值变量赋值</span></span><br><span class="line">	r1 = <span class="number">1000</span></span><br><span class="line">	r2 = <span class="number">2000</span></span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 也可以直接返回数据</span></span><br><span class="line">	<span class="comment">// return 666, 777</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当返回的形参的类型相同时，可同时定义类型</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f4</span><span class="params">(a <span class="type">string</span>, b <span class="type">int</span>)</span></span> (r1, r2 <span class="type">int</span>) &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;a = &quot;</span>, a)</span><br><span class="line">	fmt.Println(<span class="string">&quot;b = &quot;</span>, b)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 给有名称的返回值变量赋值</span></span><br><span class="line">	r1 = <span class="number">1000</span></span><br><span class="line">	r2 = <span class="number">2000</span></span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c := f1(<span class="string">&quot;abc&quot;</span>, <span class="number">123</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;c = &quot;</span>, c)</span><br><span class="line"></span><br><span class="line">	ret1, ret2 := f2(<span class="string">&quot;hello&quot;</span>, <span class="number">666</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;ret1 = &quot;</span>, ret1, <span class="string">&quot;, ret2 = &quot;</span>, ret2)</span><br><span class="line"></span><br><span class="line">	ret1, ret2 = f3(<span class="string">&quot;f3&quot;</span>, <span class="number">333</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;ret1 = &quot;</span>, ret1, <span class="string">&quot;, ret2 = &quot;</span>, ret2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<blockquote>
<p>a &#x3D;  abc<br>b &#x3D;  123<br>c &#x3D;  100<br>a &#x3D;  hello<br>b &#x3D;  666<br>ret1 &#x3D;  111 , ret2 &#x3D;  222<br>a &#x3D;  f3<br>b &#x3D;  333<br>赋值之前: r1 &#x3D;  0 , r2 &#x3D;  0<br>ret1 &#x3D;  1000 , ret2 &#x3D;  2000</p>
</blockquote>
<p><strong>init()函数与import</strong></p>
<p><code>init</code> 函数可在<code>package main</code>中，可在其他package中，可在同一个package中出现多次。</p>
<p><code>main</code>函数只能在<code>package main</code>中。</p>
<p><strong>执行顺序</strong></p>
<p>Golang里面有两个保留的函数：<strong>init函数</strong>（能够应用于所有的package）和<strong>main函数</strong>（只能应用于package main）。这两个函数在定义时不能有任何的参数和返回值。</p>
<p>虽然一个package里面可以写任意多个<strong>init函数</strong>，但这无论是对于可读性还是以后的可维护性来说，我们都强烈建议用户在一个package中每个文件只写一个<strong>init函数</strong>。</p>
<p>Go程序会自动调用<code>init()</code>和<code>main()</code>，所以你不需要在任何地方调用这两个函数。每个package中的<strong>init函数</strong>都是可选的，但<code>package main</code>就必须包含一个<strong>main函数</strong>。</p>
<p>程序的初始化和执行都起始于main包。</p>
<p>如果main包还导入了其它的包，那么就会在编译时将它们依次导入。有时一个包会被多个包同时导入，那么它只会被导入一次（例如很多包可能都会用到fmt包，但它只会被导入一次，因为没有必要导入多次）。</p>
<p>当一个包被导入时，如果该包还导入了其它的包，那么会先将其它包导入进来，然后再对这些包中的包级常量和变量进行初始化，接着执行<strong>init函数</strong>（如果有的话），依次类推。</p>
<p>等所有被导入的包都加载完毕了，就会开始对main包中的包级常量和变量进行初始化，然后执行main包中的<strong>init函数</strong>（如果存在的话），最后执行main函数。下图详细地解释了整个执行过程：</p>
<p><img src="/img/loading.gif" data-original="/../images/Go/init.png" alt="init"></p>
<p><strong>例子演示</strong></p>
<blockquote>
<p>Golang中，函数的首字母为<strong>大写</strong>时，则方法为<strong>public</strong>方法，首字母为<strong>小写</strong>时，方法为<strong>private</strong>方法。</p>
</blockquote>
<img src="/img/loading.gif" data-original="../images/Go/目录结构.png" alt="目录结构" style="zoom: 80%;" />

<p><code>lib1.go</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> lib1</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Lib1Test</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;lib1Test()...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;lib1.init()...&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>lib2.go</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> lib2</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Lib2Test</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;lib2Test()...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;lib2.init()...&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>main.go</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;5-init/lib1&quot;</span></span><br><span class="line">	<span class="string">&quot;5-init/lib2&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	lib1.Lib1Test()</span><br><span class="line">	lib2.Lib2Test()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出结果</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lib1.init()...</span><br><span class="line">lib2.init()...</span><br><span class="line">lib1Test()...</span><br><span class="line">lib2Test()...</span><br></pre></td></tr></table></figure>



<p>修改<code>lib1.go</code>，使其导入<code>lib2.go</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> lib1</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	_ <span class="string">&quot;5-init/lib2&quot;</span> <span class="comment">// &quot;_&quot; 匿名导包，导入后可以不使用</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Lib1Test</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;lib1Test()...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;lib1.init()...&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同时修改<code>main.go</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;5-init/lib1&quot;</span></span><br><span class="line">	<span class="comment">// &quot;5-init/lib2&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	lib1.Lib1Test()</span><br><span class="line">	<span class="comment">// lib2.Lib2Test()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出结果</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lib2.init()...</span><br><span class="line">lib1.init()...</span><br><span class="line">lib1Test()...</span><br></pre></td></tr></table></figure>

<blockquote>
<p>分析：main函数需要导入lib1，而lib1又需要导入lib2，因此先加载lib2，执行lib2的init函数后，再加载lib1，执行lib1的init函数，最后在main函数中调用方法</p>
</blockquote>
<p>导入的包不仅可以匿名，也可以取别名</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	mylib1 <span class="string">&quot;5-init/lib1&quot;</span> <span class="comment">// 将导入的lib1取别名mylib1</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	mylib1.Lib1Test() <span class="comment">// 通过mylib1调用方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也可通过<code>.</code>，使得调用方法时无需输入包名(不推荐，容易引起歧义)</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	. <span class="string">&quot;5-init/lib1&quot;</span> </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	Lib1Test() <span class="comment">// 直接调用方法，不推荐使用此方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 值交换</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(a <span class="type">int</span>, b <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> temp <span class="type">int</span> = a</span><br><span class="line">	a = b</span><br><span class="line">	b = temp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a <span class="type">int</span> = <span class="number">10</span></span><br><span class="line">	b := <span class="number">20</span></span><br><span class="line"></span><br><span class="line">	swap(a, b)</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;a = &quot;</span>, a, <span class="string">&quot;, b = &quot;</span>, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a =  10 , b =  20</span><br></pre></td></tr></table></figure>



<p>Go 语言的取地址符是 <code>&amp;</code>，放到一个变量前使用就会返回相应变量的内存地址。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> a <span class="type">int</span> = <span class="number">10</span>   </span><br><span class="line">   fmt.Printf(<span class="string">&quot;变量的地址: %x\n&quot;</span>, &amp;a  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">变量的地址: 20818a220</span><br></pre></td></tr></table></figure>

<p><strong>引用传递</strong>是指在调用函数时将实际参数的<strong>地址</strong>传递到函数中，那么在函数中对参数所进行的修改，将影响到实际参数。</p>
<p>以经典的交换函数<code>swap()</code>举例</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 值交换</span></span><br><span class="line"><span class="comment">/* func swap(a int, b int) &#123;</span></span><br><span class="line"><span class="comment">	var temp int = a</span></span><br><span class="line"><span class="comment">	a = b</span></span><br><span class="line"><span class="comment">	b = temp</span></span><br><span class="line"><span class="comment">&#125; */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引用交换</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(a *<span class="type">int</span>, b *<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	temp := *a</span><br><span class="line">	*a = *b</span><br><span class="line">	*b = temp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a <span class="type">int</span> = <span class="number">10</span></span><br><span class="line">	b := <span class="number">20</span></span><br><span class="line"></span><br><span class="line">	swap(&amp;a, &amp;b)</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;a = &quot;</span>, a, <span class="string">&quot;, b = &quot;</span>, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a =  20 , b =  10</span><br></pre></td></tr></table></figure>



<p>加强对<strong>指针</strong>的理解</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a <span class="type">int</span> = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> p *<span class="type">int</span> = &amp;a <span class="comment">// 一级指针</span></span><br><span class="line">	fmt.Println(&amp;a) <span class="comment">// 0xc000018088</span></span><br><span class="line">	fmt.Println(p)  <span class="comment">// 0xc000018088</span></span><br><span class="line"></span><br><span class="line">	pp := &amp;p        <span class="comment">// 二级指针</span></span><br><span class="line">	fmt.Println(&amp;p) <span class="comment">// 0xc00000a030</span></span><br><span class="line">	fmt.Println(pp) <span class="comment">// 0xc00000a030</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="defer"><a href="#defer" class="headerlink" title="defer"></a>defer</h3><p><code>defer</code>语句被用于预定对一个函数的调用。可以把这类被defer语句调用的函数称为<strong>延迟函数</strong>。</p>
<blockquote>
<p><code>defer</code>作用：</p>
<ul>
<li>释放占用的资源</li>
<li>捕捉处理异常</li>
<li>输出日志</li>
</ul>
<p>如果一个函数中有多个defer语句，它们会以LIFO（后进先出）的顺序执行。</p>
</blockquote>
<p><strong>知识点一：</strong>defer的执行顺序</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Demo</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;1&quot;</span>)</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;2&quot;</span>)</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;3&quot;</span>)</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;4&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	Demo()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">4</span><br><span class="line">3</span><br><span class="line">2</span><br><span class="line">1</span><br></pre></td></tr></table></figure>



<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 写入defer关键字，类似压栈的形式   defer类似与Java中的finally关键字</span></span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;main end 1&quot;</span>) <span class="comment">// 先入栈</span></span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;main end 2&quot;</span>) <span class="comment">// 后入栈</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;main:hello go 1&quot;</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;main:hello go 2&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">main:hello go 1</span><br><span class="line">main:hello go 2</span><br><span class="line">main end 2</span><br><span class="line">main end 1</span><br></pre></td></tr></table></figure>

<p><strong>知识点二：</strong>defer和return谁先谁后</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deferFunc</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;defer func called...&quot;</span>)</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">returnFunc</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;return func called...&quot;</span>)</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">returnAndDefer</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> deferFunc()</span><br><span class="line">	<span class="keyword">return</span> returnFunc()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	returnAndDefer()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">return</span> func called...</span><br><span class="line">defer func called...</span><br></pre></td></tr></table></figure>

<p><strong>总结</strong></p>
<p><strong>return</strong>之后的语句先执行，<strong>defer</strong>之后的语句后执行</p>
<h3 id="slice"><a href="#slice" class="headerlink" title="slice"></a>slice</h3><p><strong>数组</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printArray</span><span class="params">(array [4]<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 值拷贝</span></span><br><span class="line">	<span class="keyword">for</span> index, value := <span class="keyword">range</span> array &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;index = &quot;</span>, index, <span class="string">&quot;, value = &quot;</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line">	array[<span class="number">0</span>] = <span class="number">111</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 固定长度的数组</span></span><br><span class="line">	<span class="keyword">var</span> array1 [<span class="number">10</span>]<span class="type">int</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(array1); i++ &#123;</span><br><span class="line">		fmt.Println(array1[i])</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 前4个元素为&#123;1,2,3,4&#125;，后面均为0</span></span><br><span class="line">	array2 := [<span class="number">8</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">	<span class="keyword">for</span> index, value := <span class="keyword">range</span> array2 &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;index = &quot;</span>, index, <span class="string">&quot;, value = &quot;</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 查看数组的数据类型</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;array1 type = %T\n&quot;</span>, array1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;array2 type = %T\n&quot;</span>, array2)</span><br><span class="line"></span><br><span class="line">	array3 := [<span class="number">4</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">	printArray(array3)</span><br><span class="line">	fmt.Println(<span class="string">&quot;==============================&quot;</span>)</span><br><span class="line">	<span class="keyword">for</span> index, value := <span class="keyword">range</span> array3 &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;index = &quot;</span>, index, <span class="string">&quot;, value = &quot;</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">0</span><br><span class="line">0</span><br><span class="line">0</span><br><span class="line">0</span><br><span class="line">0</span><br><span class="line">0</span><br><span class="line">0</span><br><span class="line">0</span><br><span class="line">0</span><br><span class="line">index =  0 , value =  1</span><br><span class="line">index =  1 , value =  2</span><br><span class="line">index =  2 , value =  3</span><br><span class="line">index =  3 , value =  4</span><br><span class="line">index =  4 , value =  0</span><br><span class="line">index =  5 , value =  0</span><br><span class="line">index =  6 , value =  0</span><br><span class="line">index =  7 , value =  0</span><br><span class="line">array1 <span class="built_in">type</span> = [10]int</span><br><span class="line">array2 <span class="built_in">type</span> = [8]int</span><br><span class="line">index =  0 , value =  1</span><br><span class="line">index =  1 , value =  2</span><br><span class="line">index =  2 , value =  3</span><br><span class="line">index =  3 , value =  4</span><br><span class="line">==============================</span><br><span class="line">index =  0 , value =  1</span><br><span class="line">index =  1 , value =  2</span><br><span class="line">index =  2 , value =  3</span><br><span class="line">index =  3 , value =  4</span><br></pre></td></tr></table></figure>



<p><strong>切片</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printArr</span><span class="params">(array []<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 引用传递</span></span><br><span class="line">	<span class="comment">// &quot;_&quot; 表示匿名变量值，当只关心数组的值，而不关心索引下标时，可以使用 &quot;_&quot;</span></span><br><span class="line">	<span class="keyword">for</span> _, value := <span class="keyword">range</span> array &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;value = &quot;</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line">	array[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	array1 := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125; <span class="comment">// 动态数组，切片 slice</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;array1 type = %T\n&quot;</span>, array1)</span><br><span class="line">	printArr(array1)</span><br><span class="line">	fmt.Println(<span class="string">&quot;=======================&quot;</span>)</span><br><span class="line">	<span class="keyword">for</span> _, value := <span class="keyword">range</span> array1 &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;value = &quot;</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">array1 <span class="built_in">type</span> = []int</span><br><span class="line">value =  1</span><br><span class="line">value =  2</span><br><span class="line">value =  3</span><br><span class="line">value =  4</span><br><span class="line">=======================</span><br><span class="line">value =  100</span><br><span class="line">value =  2</span><br><span class="line">value =  3</span><br><span class="line">value =  4</span><br></pre></td></tr></table></figure>



<p><strong>总结</strong></p>
<ol>
<li>数组的长度是固定的</li>
<li>固定长度的数组在传参的时候，是严格匹配数组类型的</li>
<li>数组在传值的时候是值拷贝，无法修改其原本数组</li>
<li>slice(动态数组)在传参时是引用传递，且不同元素长度的动态数组的形参是一致的</li>
</ol>
<p><strong>slice的声明方式</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 声明slice1是一个切片，并初始化默认值为1,2,3，长度len是3</span></span><br><span class="line">	slice1 := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;len = %d, slice = %v\n&quot;</span>, <span class="built_in">len</span>(slice1), slice1)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 声明slice2是一个切片，但并没有给slice2分配空间</span></span><br><span class="line">	<span class="keyword">var</span> slice2 []<span class="type">int</span></span><br><span class="line">	<span class="comment">// slice2[0] = 1 // 未分配空间，报错：runtime error: index out of range [0] with length 0</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;len = %d, slice = %v\n&quot;</span>, <span class="built_in">len</span>(slice2), slice2)</span><br><span class="line"></span><br><span class="line">	slice2 = <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">3</span>) <span class="comment">// 开辟3个空间</span></span><br><span class="line">	slice2[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;len = %d, slice = %v\n&quot;</span>, <span class="built_in">len</span>(slice2), slice2)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 声明slice3是一个切片，同时给slice3分配3个空间，初始化值是0</span></span><br><span class="line">	<span class="comment">// var slice3 []int = make([]int, 3)</span></span><br><span class="line">	slice3 := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">3</span>) <span class="comment">// 两种声明方式等价</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;len = %d, slice = %v\n&quot;</span>, <span class="built_in">len</span>(slice3), slice3)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 判断slice是否为0</span></span><br><span class="line">	<span class="keyword">if</span> slice3 == <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;slice3是一个空切片&quot;</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;slice3是有空间的&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>切片容量的追加</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> numbers = <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">3</span>, <span class="number">5</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;len = %d, cap = %d, slice = %v\n&quot;</span>, <span class="built_in">len</span>(numbers), <span class="built_in">cap</span>(numbers), numbers)</span><br><span class="line">	<span class="comment">// numbers[4] = 4 // 报错：runtime error: index out of range [4] with length 3</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 向numbers切片添加一个元素4</span></span><br><span class="line">	numbers = <span class="built_in">append</span>(numbers, <span class="number">4</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;len = %d, cap = %d, slice = %v\n&quot;</span>, <span class="built_in">len</span>(numbers), <span class="built_in">cap</span>(numbers), numbers)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 向numbers切片添加一个元素5</span></span><br><span class="line">	numbers = <span class="built_in">append</span>(numbers, <span class="number">5</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;len = %d, cap = %d, slice = %v\n&quot;</span>, <span class="built_in">len</span>(numbers), <span class="built_in">cap</span>(numbers), numbers)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 向一个容量cap已经满的slice追加元素</span></span><br><span class="line">	numbers = <span class="built_in">append</span>(numbers, <span class="number">6</span>) <span class="comment">// 往cap已经满的slice追加元素后，slice会扩容 cap 个空间</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;len = %d, cap = %d, slice = %v\n&quot;</span>, <span class="built_in">len</span>(numbers), <span class="built_in">cap</span>(numbers), numbers)</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;=========================================&quot;</span>)</span><br><span class="line">	<span class="keyword">var</span> numbers2 = <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">3</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;len = %d, cap = %d, slice = %v\n&quot;</span>, <span class="built_in">len</span>(numbers2), <span class="built_in">cap</span>(numbers2), numbers2)</span><br><span class="line"></span><br><span class="line">	numbers2 = <span class="built_in">append</span>(numbers2, <span class="number">1</span>) <span class="comment">// 长度超过cap，则将容量增加2倍</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;len = %d, cap = %d, slice = %v\n&quot;</span>, <span class="built_in">len</span>(numbers2), <span class="built_in">cap</span>(numbers2), numbers2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">len = 3, <span class="built_in">cap</span> = 5, slice = [0 0 0]</span><br><span class="line">len = 4, <span class="built_in">cap</span> = 5, slice = [0 0 0 4]</span><br><span class="line">len = 5, <span class="built_in">cap</span> = 5, slice = [0 0 0 4 5]</span><br><span class="line">len = 6, <span class="built_in">cap</span> = 10, slice = [0 0 0 4 5 6]</span><br><span class="line">=========================================</span><br><span class="line">len = 3, <span class="built_in">cap</span> = 3, slice = [0 0 0]</span><br><span class="line">len = 4, <span class="built_in">cap</span> = 6, slice = [0 0 0 1]</span><br></pre></td></tr></table></figure>

<p><strong>总结</strong></p>
<ol>
<li>切片的<strong>长度</strong>和<strong>容量</strong>不同，<strong>长度</strong>表示左指针至右指针之间的距离，<strong>容量</strong>表示左指针至底层数组末尾的距离</li>
<li>切片的<strong>扩容机制</strong>：<code>append</code>的时候，如果<strong>长度</strong>增加后超过<strong>容量</strong>，则将<strong>容量</strong>增加$2$倍</li>
</ol>
<p><strong>切片的截取</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="comment">/* 创建切片 */</span></span><br><span class="line">   numbers := []<span class="type">int</span>&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>&#125;   </span><br><span class="line">   printSlice(numbers)</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* 打印原始切片 */</span></span><br><span class="line">   fmt.Println(<span class="string">&quot;numbers ==&quot;</span>, numbers)</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* 打印子切片从索引1(包含) 到索引4(不包含)*/</span></span><br><span class="line">   fmt.Println(<span class="string">&quot;numbers[1:4] ==&quot;</span>, numbers[<span class="number">1</span>:<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* 默认下限为 0*/</span></span><br><span class="line">   fmt.Println(<span class="string">&quot;numbers[:3] ==&quot;</span>, numbers[:<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* 默认上限为 len(s)*/</span></span><br><span class="line">   fmt.Println(<span class="string">&quot;numbers[4:] ==&quot;</span>, numbers[<span class="number">4</span>:])</span><br><span class="line"></span><br><span class="line">   numbers1 := <span class="built_in">make</span>([]<span class="type">int</span>,<span class="number">0</span>,<span class="number">5</span>)</span><br><span class="line">   printSlice(numbers1)</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* 打印子切片从索引  0(包含) 到索引 2(不包含) */</span></span><br><span class="line">   number2 := numbers[:<span class="number">2</span>]</span><br><span class="line">   printSlice(number2)</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* 打印子切片从索引 2(包含) 到索引 5(不包含) */</span></span><br><span class="line">   number3 := numbers[<span class="number">2</span>:<span class="number">5</span>]</span><br><span class="line">   printSlice(number3)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printSlice</span><span class="params">(x []<span class="type">int</span>)</span></span>&#123;</span><br><span class="line">   fmt.Printf(<span class="string">&quot;len=%d cap=%d slice=%v\n&quot;</span>,<span class="built_in">len</span>(x),<span class="built_in">cap</span>(x),x)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">len=9 <span class="built_in">cap</span>=9 slice=[0 1 2 3 4 5 6 7 8]</span><br><span class="line">numbers == [0 1 2 3 4 5 6 7 8]</span><br><span class="line">numbers[1:4] == [1 2 3]</span><br><span class="line">numbers[:3] == [0 1 2]</span><br><span class="line">numbers[4:] == [4 5 6 7 8]</span><br><span class="line">len=0 <span class="built_in">cap</span>=5 slice=[]</span><br><span class="line">len=2 <span class="built_in">cap</span>=9 slice=[0 1]</span><br><span class="line">len=3 <span class="built_in">cap</span>=7 slice=[2 3 4]</span><br></pre></td></tr></table></figure>



<p><strong>copy()函数</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125; <span class="comment">// len = 3, cap =3, s = [1, 2, 3]</span></span><br><span class="line">	<span class="comment">// 截取 s 数组中 [0, 2)中的元素</span></span><br><span class="line">	s1 := s[<span class="number">0</span>:<span class="number">2</span>] <span class="comment">// s1 = [1, 2]</span></span><br><span class="line">	fmt.Println(s1)</span><br><span class="line"></span><br><span class="line">	s1[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">	fmt.Println(s)</span><br><span class="line">	fmt.Println(s1)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// copy 可以将底层数组的slice一起进行拷贝</span></span><br><span class="line">	s2 := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">3</span>) <span class="comment">// s2 = [0, 0, 0]</span></span><br><span class="line">	<span class="comment">// 将s中的值依次拷贝到s2中</span></span><br><span class="line">	<span class="built_in">copy</span>(s2, s)</span><br><span class="line">	fmt.Println(s2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[1 2]</span><br><span class="line">[100 2 3]</span><br><span class="line">[100 2]</span><br><span class="line">[100 2 3]</span><br></pre></td></tr></table></figure>

<h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><p><strong>map</strong>的定义方式</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 第一种声明方式</span></span><br><span class="line">	<span class="comment">// 声明myMap1为map类型，key是string，value是string</span></span><br><span class="line">	<span class="keyword">var</span> myMap1 <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span></span><br><span class="line">	<span class="keyword">if</span> myMap1 == <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;myMap1是一个空map&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 在使用map前，需要先用make给map分配数据空间</span></span><br><span class="line">	myMap1 = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>, <span class="number">10</span>)</span><br><span class="line">	myMap1[<span class="string">&quot;one&quot;</span>] = <span class="string">&quot;java&quot;</span></span><br><span class="line">	myMap1[<span class="string">&quot;two&quot;</span>] = <span class="string">&quot;python&quot;</span></span><br><span class="line">	myMap1[<span class="string">&quot;three&quot;</span>] = <span class="string">&quot;c++&quot;</span></span><br><span class="line">	fmt.Println(myMap1)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 第二种声明方式</span></span><br><span class="line">	myMap2 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">int</span>]<span class="type">string</span>)</span><br><span class="line">	myMap2[<span class="number">1</span>] = <span class="string">&quot;java&quot;</span></span><br><span class="line">	myMap2[<span class="number">2</span>] = <span class="string">&quot;python&quot;</span></span><br><span class="line">	myMap2[<span class="number">3</span>] = <span class="string">&quot;c++&quot;</span></span><br><span class="line">	fmt.Println(myMap2)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 第三种声明方式</span></span><br><span class="line">	myMap3 := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>&#123;</span><br><span class="line">		<span class="string">&quot;one&quot;</span>:   <span class="string">&quot;java&quot;</span>,</span><br><span class="line">		<span class="string">&quot;two&quot;</span>:   <span class="string">&quot;python&quot;</span>,</span><br><span class="line">		<span class="string">&quot;three&quot;</span>: <span class="string">&quot;c++&quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(myMap3)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">myMap1是一个空map</span><br><span class="line">map[one:java three:c++ two:python]</span><br><span class="line">map[1:java 2:python 3:c++]</span><br><span class="line">map[one:java three:c++ two:python]</span><br></pre></td></tr></table></figure>



<p><strong>map常用操作</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printMap</span><span class="params">(cityMap <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 引用传递</span></span><br><span class="line">	<span class="keyword">for</span> key, value := <span class="keyword">range</span> cityMap &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;key = &quot;</span>, key, <span class="string">&quot;, value = &quot;</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">changeMap</span><span class="params">(cityMap <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 引用传递</span></span><br><span class="line">	cityMap[<span class="string">&quot;England&quot;</span>] = <span class="string">&quot;London&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	cityMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 添加</span></span><br><span class="line">	cityMap[<span class="string">&quot;China&quot;</span>] = <span class="string">&quot;Beijing&quot;</span></span><br><span class="line">	cityMap[<span class="string">&quot;Japan&quot;</span>] = <span class="string">&quot;Tokyo&quot;</span></span><br><span class="line">	cityMap[<span class="string">&quot;USA&quot;</span>] = <span class="string">&quot;NewYork&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 遍历</span></span><br><span class="line">	<span class="keyword">for</span> key, value := <span class="keyword">range</span> cityMap &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;key = &quot;</span>, key, <span class="string">&quot;, value = &quot;</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 删除</span></span><br><span class="line">	<span class="built_in">delete</span>(cityMap, <span class="string">&quot;China&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 修改</span></span><br><span class="line">	cityMap[<span class="string">&quot;USA&quot;</span>] = <span class="string">&quot;DC&quot;</span></span><br><span class="line"></span><br><span class="line">	changeMap(cityMap)</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;=====================================&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 遍历</span></span><br><span class="line">	printMap(cityMap)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">key =  Japan , value =  Tokyo</span><br><span class="line">key =  USA , value =  NewYork</span><br><span class="line">key =  China , value =  Beijing</span><br><span class="line">=====================================</span><br><span class="line">key =  USA , value =  DC</span><br><span class="line">key =  England , value =  London</span><br><span class="line">key =  Japan , value =  Tokyo</span><br></pre></td></tr></table></figure>

<h3 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h3><p><strong>结构体</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明一种新的数据类型 myint，是 int 的一个别名</span></span><br><span class="line"><span class="keyword">type</span> myint <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个结构体</span></span><br><span class="line"><span class="keyword">type</span> Book <span class="keyword">struct</span> &#123;</span><br><span class="line">	title <span class="type">string</span></span><br><span class="line">	auth  <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">changeBook</span><span class="params">(book Book)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 传递一个book的副本</span></span><br><span class="line">	book.auth = <span class="string">&quot;666&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">changeBook2</span><span class="params">(book *Book)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 指针传递</span></span><br><span class="line">	book.auth = <span class="string">&quot;777&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a myint = <span class="number">10</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;a = &quot;</span>, a)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;type of a = %T\n&quot;</span>, a)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> book1 Book</span><br><span class="line">	book1.title = <span class="string">&quot;Golang&quot;</span></span><br><span class="line">	book1.auth = <span class="string">&quot;zhangsan&quot;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, book1)</span><br><span class="line"></span><br><span class="line">	changeBook(book1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, book1)</span><br><span class="line"></span><br><span class="line">	changeBook2(&amp;book1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, book1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a =  10</span><br><span class="line"><span class="built_in">type</span> of a = main.myint</span><br><span class="line">&#123;Golang zhangsan&#125;</span><br><span class="line">&#123;Golang zhangsan&#125;</span><br><span class="line">&#123;Golang 777&#125;</span><br></pre></td></tr></table></figure>

<p><strong>封装</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Hero <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name  <span class="type">string</span></span><br><span class="line">	Ad    <span class="type">int</span></span><br><span class="line">	Level <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this Hero)</span></span> Show() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Name = &quot;</span>, this.Name)</span><br><span class="line">	fmt.Println(<span class="string">&quot;Ad = &quot;</span>, this.Ad)</span><br><span class="line">	fmt.Println(<span class="string">&quot;Level = &quot;</span>, this.Level)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this Hero)</span></span> GetName() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> this.Name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this Hero)</span></span> SetName(newName <span class="type">string</span>) &#123;</span><br><span class="line">	this.Name = newName</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 创建一个对象</span></span><br><span class="line">	hero := Hero&#123;Name: <span class="string">&quot;zhangsan&quot;</span>, Ad: <span class="number">100</span>, Level: <span class="number">10</span>&#125;</span><br><span class="line">	hero.Show()</span><br><span class="line"></span><br><span class="line">	hero.SetName(<span class="string">&quot;LiSi&quot;</span>)</span><br><span class="line">	hero.Show()</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Name =  zhangsan</span><br><span class="line">Ad =  <span class="number">100</span></span><br><span class="line">Level =  <span class="number">10</span></span><br><span class="line">Name =  zhangsan</span><br><span class="line">Ad =  <span class="number">100</span></span><br><span class="line">Level =  <span class="number">10</span></span><br></pre></td></tr></table></figure>

<p>将传入的对象修改为指针</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果类名首字母大写，表示该类可被其他包访问(类似Java的public)</span></span><br><span class="line"><span class="keyword">type</span> Hero <span class="keyword">struct</span> &#123;</span><br><span class="line">    	<span class="comment">// 如果类的属性的首字母大写，表示该属性对外能够访问(类似Java的public)，否则只能类的内部访问(类似Java的private)</span></span><br><span class="line">	Name  <span class="type">string</span></span><br><span class="line">	Ad    <span class="type">int</span></span><br><span class="line">	Level <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* func (this Hero) Show() &#123;</span></span><br><span class="line"><span class="comment">	fmt.Println(&quot;Name = &quot;, this.Name)</span></span><br><span class="line"><span class="comment">	fmt.Println(&quot;Ad = &quot;, this.Ad)</span></span><br><span class="line"><span class="comment">	fmt.Println(&quot;Level = &quot;, this.Level)</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">func (this Hero) GetName() string &#123;</span></span><br><span class="line"><span class="comment">	return this.Name</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">func (this Hero) SetName(newName string) &#123;</span></span><br><span class="line"><span class="comment">	this.Name = newName</span></span><br><span class="line"><span class="comment">&#125; */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Hero)</span></span> Show() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Name = &quot;</span>, this.Name)</span><br><span class="line">	fmt.Println(<span class="string">&quot;Ad = &quot;</span>, this.Ad)</span><br><span class="line">	fmt.Println(<span class="string">&quot;Level = &quot;</span>, this.Level)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Hero)</span></span> GetName() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> this.Name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Hero)</span></span> SetName(newName <span class="type">string</span>) &#123;</span><br><span class="line">	this.Name = newName</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 创建一个对象</span></span><br><span class="line">	hero := Hero&#123;Name: <span class="string">&quot;zhangsan&quot;</span>, Ad: <span class="number">100</span>, Level: <span class="number">10</span>&#125;</span><br><span class="line">	hero.Show()</span><br><span class="line"></span><br><span class="line">	hero.SetName(<span class="string">&quot;LiSi&quot;</span>)</span><br><span class="line">	hero.Show()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Name =  zhangsan</span><br><span class="line">Ad =  100</span><br><span class="line">Level =  10</span><br><span class="line">Name =  LiSi</span><br><span class="line">Ad =  100</span><br><span class="line">Level =  10</span><br></pre></td></tr></table></figure>

<p><strong>继承</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Human <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	sex  <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Human)</span></span> Eat() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Human.Eat()...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Human)</span></span> Walk() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Human.Walk()...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ===========================================</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> SuperMan <span class="keyword">struct</span> &#123;</span><br><span class="line">	Human <span class="comment">// SuperMan类继承了Human类的方法</span></span><br><span class="line">	Level <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重写父类的方法Eat()</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *SuperMan)</span></span> Eat() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;SuperMan.Eat()...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子类的新方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *SuperMan)</span></span> Fly() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;SuperMan.Fly()...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *SuperMan)</span></span> Print() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;name = &quot;</span>, this.name)</span><br><span class="line">	fmt.Println(<span class="string">&quot;sex = &quot;</span>, this.sex)</span><br><span class="line">	fmt.Println(<span class="string">&quot;Level = &quot;</span>, this.Level)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	h := Human&#123;<span class="string">&quot;zhangsan&quot;</span>, <span class="string">&quot;female&quot;</span>&#125;</span><br><span class="line">	h.Eat()</span><br><span class="line">	h.Walk()</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;=============================&quot;</span>)</span><br><span class="line">	<span class="comment">// 定义一个子类对象</span></span><br><span class="line">	<span class="comment">// s := SuperMan&#123;Human&#123;&quot;lisi&quot;, &quot;female&quot;&#125;, 10&#125;</span></span><br><span class="line">	<span class="comment">// 等价</span></span><br><span class="line">	<span class="keyword">var</span> s SuperMan</span><br><span class="line">	s.name = <span class="string">&quot;lisi&quot;</span></span><br><span class="line">	s.sex = <span class="string">&quot;female&quot;</span></span><br><span class="line">	s.Level = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">	s.Walk() <span class="comment">// 父类的方法</span></span><br><span class="line">	s.Eat()  <span class="comment">// 子类的方法</span></span><br><span class="line">	s.Fly()  <span class="comment">// 子类的方法</span></span><br><span class="line"></span><br><span class="line">	s.Print()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Human.Eat()...</span><br><span class="line">Human.Walk()...</span><br><span class="line">=============================</span><br><span class="line">Human.Walk()...</span><br><span class="line">SuperMan.Eat()...</span><br><span class="line">SuperMan.Fly()...</span><br><span class="line">name =  lisi</span><br><span class="line">sex =  female</span><br><span class="line">Level =  10</span><br></pre></td></tr></table></figure>

<p><strong>多态</strong></p>
<p>基本要素：</p>
<ol>
<li>有一个父类(有接口)</li>
</ol>
<p><img src="/img/loading.gif" data-original="/../images/Go/20230524150652.png" alt="20230524150652"></p>
<ol start="2">
<li>有子类(实现了父类的全部接口方法)</li>
</ol>
<p><img src="/img/loading.gif" data-original="/../images/Go/20230524150819.png" alt="20230524150819"></p>
<ol start="3">
<li>父类类型的变量(指针)指向(引用)子类的具体数据变量</li>
</ol>
<p><img src="/img/loading.gif" data-original="/../images/Go/20230524150936.png" alt="20230524150936"></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 本质是一个指针</span></span><br><span class="line"><span class="keyword">type</span> AnimalIF <span class="keyword">interface</span> &#123;</span><br><span class="line">	Sleep()</span><br><span class="line">	GetColor() <span class="type">string</span> <span class="comment">// 获取动物的颜色</span></span><br><span class="line">	GetType() <span class="type">string</span>  <span class="comment">// 获取动物的种类</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 具体的类</span></span><br><span class="line"><span class="keyword">type</span> Cat <span class="keyword">struct</span> &#123;</span><br><span class="line">	color <span class="type">string</span> <span class="comment">// 猫的颜色</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Cat)</span></span> Sleep() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Cat Sleep...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Cat)</span></span> GetColor() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> this.color</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Cat)</span></span> GetType() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;Cat&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 具体的类</span></span><br><span class="line"><span class="keyword">type</span> Dog <span class="keyword">struct</span> &#123;</span><br><span class="line">	color <span class="type">string</span> <span class="comment">// 猫的颜色</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Dog)</span></span> Sleep() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Dog Sleep...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Dog)</span></span> GetColor() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> this.color</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Dog)</span></span> GetType() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;Dog&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">showAnimal</span><span class="params">(animal AnimalIF)</span></span> &#123;</span><br><span class="line">	animal.Sleep() <span class="comment">// 多态</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;color = &quot;</span>, animal.GetColor())</span><br><span class="line">	fmt.Println(<span class="string">&quot;type = &quot;</span>, animal.GetType())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> animal AnimalIF <span class="comment">// 接口的数据类型，父类指针</span></span><br><span class="line">	animal = &amp;Cat&#123;<span class="string">&quot;White&quot;</span>&#125;</span><br><span class="line">	animal.Sleep() <span class="comment">// 调用的就是Cat的Sleep方法</span></span><br><span class="line"></span><br><span class="line">	animal = &amp;Dog&#123;<span class="string">&quot;Yellow&quot;</span>&#125;</span><br><span class="line">	animal.Sleep() <span class="comment">// 调用的就是Dog的Sleep方法</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;===============================&quot;</span>)</span><br><span class="line"></span><br><span class="line">	cat := Cat&#123;<span class="string">&quot;White&quot;</span>&#125;</span><br><span class="line">	dog := Dog&#123;<span class="string">&quot;Yellow&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">	showAnimal(&amp;cat)</span><br><span class="line">	showAnimal(&amp;dog)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Cat Sleep...</span><br><span class="line">Dog Sleep...</span><br><span class="line">===============================</span><br><span class="line">Cat Sleep...</span><br><span class="line">color =  White</span><br><span class="line"><span class="built_in">type</span> =  Cat</span><br><span class="line">Dog Sleep...</span><br><span class="line">color =  Yello</span><br><span class="line"><span class="built_in">type</span> =  Dog</span><br></pre></td></tr></table></figure>

<h3 id="interface"><a href="#interface" class="headerlink" title="interface"></a>interface</h3><p>Golang的语言中提供了断言的功能。golang中的所有程序都实现了interface{}的接口，这意味着，所有的类型如string,int,int64甚至是自定义的struct类型都就此拥有了interface{}的接口，这种做法和java中的Object类型比较类似。那么在一个数据通过func funcName(interface{})的方式传进来的时候，也就意味着这个参数被自动的转为interface{}的类型。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// interface&#123;&#125;是万能数据类型</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myfunc</span><span class="params">(arg <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;myfunc is called...&quot;</span>)</span><br><span class="line">	fmt.Println(arg)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// interface&#123;&#125;该如何区分此时引用的底层数据类型到底是什么呢</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// interface&#123;&#125;有&quot;类型断言&quot;机制</span></span><br><span class="line">	value, ok := arg.(<span class="type">string</span>)</span><br><span class="line">	<span class="keyword">if</span> !ok &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;arg is not string type&quot;</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;arg is string type, value = &quot;</span>, value)</span><br><span class="line">		fmt.Printf(<span class="string">&quot;value type is %T\n&quot;</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Book <span class="keyword">struct</span> &#123;</span><br><span class="line">	auth <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	book := Book&#123;<span class="string">&quot;Golang&quot;</span>&#125;</span><br><span class="line">	myfunc(book)</span><br><span class="line">	myfunc(<span class="number">100</span>)</span><br><span class="line">	myfunc(<span class="string">&quot;abc&quot;</span>)</span><br><span class="line">	myfunc(<span class="number">3.14</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="反射reflect"><a href="#反射reflect" class="headerlink" title="反射reflect"></a>反射reflect</h3><p>在计算机科学领域，反射是指一类应用，它们能够自描述和自控制。也就是说，这类应用通过采用某种机制来实现对自己行为的描述（self-representation）和监测（examination），并能根据自身行为的状态和结果，调整或修改应用所描述行为的状态和相关的语义。</p>
<p>每种语言的反射模型都不同，并且有些语言根本不支持反射。Golang语言实现了反射，反射机制就是在运行时动态的调用对象的方法和属性，官方自带的reflect包就是反射相关的，只要包含这个包就可以使用。</p>
<p>多插一句，Golang的gRPC也是通过反射实现的。</p>
<p><strong>interface和反射</strong></p>
<p>在讲反射之前，先来看看Golang关于类型设计的一些原则</p>
<ul>
<li>变量包括（type, value）两部分</li>
<li>type 包括 <code>static type</code>和<code>concrete type</code>. 简单来说 static type是你在编码是看见的类型(如int、string)，<code>concrete type</code>是<code>runtime</code>系统看见的类型</li>
<li>类型断言能否成功，取决于变量的<code>concrete type</code>，而不是<code>static type</code>. 因此，一个 <code>reader</code>变量如果它的<code>concrete type</code>也实现了write方法的话，它也可以被类型断言为writer.</li>
</ul>
<p>接下来要讲的<strong>反射</strong>，就是建立在类型之上的，Golang的指定类型的变量的类型是静态的（也就是指定int、string这些的变量，它的type是static type），在创建变量的时候就已经确定，反射主要与Golang的interface类型相关（它的type是concrete type），只有interface类型才有反射一说。</p>
<p>在Golang的实现中，每个interface变量都有一个对应pair，pair中记录了实际变量的值和类型:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(value, <span class="keyword">type</span>)</span><br></pre></td></tr></table></figure>

<p>value是实际变量值，type是实际变量的类型。一个interface{}类型的变量包含了2个指针，一个指针指向值的类型【对应concrete type】，另外一个指针指向实际的值【对应value】。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a <span class="type">string</span></span><br><span class="line">	<span class="comment">// pair&lt;statictype:string, value:&quot;zhangsan&quot;&gt;</span></span><br><span class="line">	a = <span class="string">&quot;zhangsan&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// pair&lt;type:string, value:&quot;zhangsan&quot;&gt;</span></span><br><span class="line">	<span class="keyword">var</span> allType <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">	allType = a</span><br><span class="line"></span><br><span class="line">	str, _ := allType.(<span class="type">string</span>)</span><br><span class="line">	fmt.Println(str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zhangsan</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// tty: pair&lt;type:*os.File, value:&quot;/dev/tty&quot;文件描述符&gt;</span></span><br><span class="line">	tty, err := os.OpenFile(<span class="string">&quot;/dev/tty&quot;</span>, os.O_RDWR, <span class="number">0</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;open file error&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// r: pair&lt;type:, value: &gt;</span></span><br><span class="line">	<span class="keyword">var</span> r io.Reader</span><br><span class="line">	<span class="comment">// r: pair&lt;type:*os.File, value:&quot;/dev/tty&quot;文件描述符&gt;</span></span><br><span class="line">	r = tty</span><br><span class="line"></span><br><span class="line">	<span class="comment">// w: pair&lt;type:, value: &gt;</span></span><br><span class="line">	<span class="keyword">var</span> w io.Writer</span><br><span class="line">	<span class="comment">// w: pair&lt;type:*os.File, value:&quot;/dev/tty&quot;文件描述符&gt;</span></span><br><span class="line">	w = r.(io.Writer)</span><br><span class="line"></span><br><span class="line">	w.Write([]<span class="type">byte</span>(<span class="string">&quot;HELLO THIS IS A TEST!!!\n&quot;</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Reader <span class="keyword">interface</span> &#123;</span><br><span class="line">	ReadBook()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Writer <span class="keyword">interface</span> &#123;</span><br><span class="line">	WriteBook()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 具体类型</span></span><br><span class="line"><span class="keyword">type</span> Book <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Book)</span></span> ReadBook() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Read a Book&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Book)</span></span> WriteBook() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Write a Book&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// b: pair&lt;type: Book, value: book&#123;&#125;地址&gt;</span></span><br><span class="line">	b := &amp;Book&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// r: pair&lt;type: , value: &gt;</span></span><br><span class="line">	<span class="keyword">var</span> r Reader</span><br><span class="line">	<span class="comment">// r: pair&lt;type: Book, value: book&#123;&#125;地址&gt;</span></span><br><span class="line">	r = b</span><br><span class="line">	r.ReadBook()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> w Writer</span><br><span class="line"></span><br><span class="line">	w = r.(Writer) <span class="comment">// 此处的断言会成功。因为w和r具体的type是一致的</span></span><br><span class="line">	w.WriteBook()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Read a Book</span><br><span class="line">Write a Book</span><br></pre></td></tr></table></figure>



<p><strong>反射的基本使用</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reflectNum</span><span class="params">(arg <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;type: &quot;</span>, reflect.TypeOf(arg))</span><br><span class="line">	fmt.Println(<span class="string">&quot;value: &quot;</span>, reflect.ValueOf(arg))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> num <span class="type">float64</span> = <span class="number">1.2456</span></span><br><span class="line">	reflectNum(num)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span>:  float64</span><br><span class="line">value:  1.2456</span><br></pre></td></tr></table></figure>



<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id   <span class="type">int</span></span><br><span class="line">	Name <span class="type">string</span></span><br><span class="line">	Age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this User)</span></span> Call() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;user is called...&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, this)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	user := User&#123;<span class="number">1</span>, <span class="string">&quot;lpc&quot;</span>, <span class="number">18</span>&#125;</span><br><span class="line">	DoFiledAndMethod(user)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">DoFiledAndMethod</span><span class="params">(input <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 获取input的type</span></span><br><span class="line">	inputType := reflect.TypeOf(input)</span><br><span class="line">	fmt.Println(<span class="string">&quot;inputType is :&quot;</span>, inputType.Name())</span><br><span class="line">	<span class="comment">// 获取input的value</span></span><br><span class="line">	inputValue := reflect.ValueOf(input)</span><br><span class="line">	fmt.Println(<span class="string">&quot;inputValue is :&quot;</span>, inputValue)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 通过type获取里面的字段</span></span><br><span class="line">	<span class="comment">// 1.获取interface的reflect.Type，通过Type得到NumField，进行遍历</span></span><br><span class="line">	<span class="comment">// 2.得到每个field，数据类型</span></span><br><span class="line">	<span class="comment">// 3.通过field有一个Interface()方法得到对应的value</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; inputType.NumField(); i++ &#123;</span><br><span class="line">		field := inputType.Field(i)</span><br><span class="line">		value := inputValue.Field(i).Interface()</span><br><span class="line"></span><br><span class="line">		fmt.Printf(<span class="string">&quot;%s: %v = %v\n&quot;</span>, field.Name, field.Type, value)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 通过type获取里面的方法</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; inputType.NumMethod(); i++ &#123;</span><br><span class="line">		m := inputType.Method(i)</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%s: %v\n&quot;</span>, m.Name, m.Type)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">inputType is : User</span><br><span class="line">inputValue is : &#123;1 lpc 18&#125;</span><br><span class="line">Id: int = 1</span><br><span class="line">Name: string = lpc</span><br><span class="line">Age: int = 18</span><br><span class="line">Call: func(main.User)</span><br></pre></td></tr></table></figure>

<h3 id="结构体标签"><a href="#结构体标签" class="headerlink" title="结构体标签"></a>结构体标签</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> resume <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="type">string</span> <span class="string">`info:&quot;name&quot; doc:&quot;我的名字&quot;`</span></span><br><span class="line">	Sex  <span class="type">string</span> <span class="string">`info:&quot;sex&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findTag</span><span class="params">(stru <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	t := reflect.TypeOf(stru).Elem()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; t.NumField(); i++ &#123;</span><br><span class="line">		tagInfo := t.Field(i).Tag.Get(<span class="string">&quot;info&quot;</span>)</span><br><span class="line">		tagDoc := t.Field(i).Tag.Get(<span class="string">&quot;doc&quot;</span>)</span><br><span class="line">		fmt.Println(<span class="string">&quot;info: &quot;</span>, tagInfo, <span class="string">&quot;doc: &quot;</span>, tagDoc)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> stru resume</span><br><span class="line">	findTag(&amp;stru)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">info:  name doc:  我的名字</span><br><span class="line">info:  sex doc:  </span><br></pre></td></tr></table></figure>

<p><strong>应用</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Movie <span class="keyword">struct</span> &#123;</span><br><span class="line">	Title  <span class="type">string</span>   <span class="string">`json: &quot;title&quot;`</span></span><br><span class="line">	Year   <span class="type">int</span>      <span class="string">`json: &quot;year&quot;`</span></span><br><span class="line">	Price  <span class="type">int</span>      <span class="string">`json:&quot;rmb&quot;`</span></span><br><span class="line">	Actors []<span class="type">string</span> <span class="string">`json:&quot;actors&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	movie := Movie&#123;<span class="string">&quot;喜剧之王&quot;</span>, <span class="number">2000</span>, <span class="number">10</span>, []<span class="type">string</span>&#123;<span class="string">&quot;xingye&quot;</span>, <span class="string">&quot;zhangguozhi&quot;</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 编码的过程 结构体---&gt;json</span></span><br><span class="line">	jsonStr, err := json.Marshal(movie)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;json marshal error&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;结构体---&gt;json&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;jsonStr = %s\n&quot;</span>, jsonStr)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 解码的过程 json---&gt;结构体</span></span><br><span class="line">	<span class="comment">// jsonStr = &#123;&quot;Title&quot;:&quot;喜剧之王&quot;,&quot;Year&quot;:2000,&quot;rmb&quot;:10,&quot;actors&quot;:[&quot;xingye&quot;,&quot;zhangguozhi&quot;]&#125;</span></span><br><span class="line">	myMovie := Movie&#123;&#125;</span><br><span class="line">	err = json.Unmarshal(jsonStr, &amp;myMovie)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;json unmarshal error&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;json---&gt;结构体&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, myMovie)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">结构体---&gt;json</span><br><span class="line">jsonStr = &#123;<span class="string">&quot;Title&quot;</span>:<span class="string">&quot;喜剧之王&quot;</span>,<span class="string">&quot;Year&quot;</span>:2000,<span class="string">&quot;rmb&quot;</span>:10,<span class="string">&quot;actors&quot;</span>:[<span class="string">&quot;xingye&quot;</span>,<span class="string">&quot;zhangguozhi&quot;</span>]&#125;</span><br><span class="line">json---&gt;结构体</span><br><span class="line">&#123;喜剧之王 2000 10 [xingye zhangguozhi]&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Golang高阶"><a href="#Golang高阶" class="headerlink" title="Golang高阶"></a>Golang高阶</h2><h3 id="Goroutine"><a href="#Goroutine" class="headerlink" title="Goroutine"></a>Goroutine</h3><p><strong>协程并发</strong></p>
<p>协程：co-routine。也叫轻量级线程。</p>
<p>与传统的系统级线程和进程相比，协程最大的优势在于“轻量级”。可以轻松创建上万个而不会导致系统资源衰竭。而线程和进程通常很难超过1万个。这也是协程别称“轻量级线程”的原因。</p>
<p>一个线程中可以有任意多个协程，但某一时刻只能有一个协程在运行，多个协程分享该线程分配到的计算机资源。</p>
<p>多数语言在语法层面并不直接支持协程，而是通过库的方式支持，但用库的方式支持的功能也并不完整，比如仅仅提供协程的创建、销毁与切换等能力。如果在这样的轻量级线程中调用一个同步 IO 操作，比如网络通信、本地文件读写，都会阻塞其他的并发执行轻量级线程，从而无法真正达到轻量级线程本身期望达到的目标。</p>
<p>在协程中，调用一个任务就像调用一个函数一样，消耗的系统资源最少！但能达到进程、线程并发相同的效果。</p>
<p>在一次并发任务中，进程、线程、协程均可以实现。从系统资源消耗的角度出发来看，进程相当多，线程次之，协程最少。</p>
<p><strong>Go并发</strong></p>
<p>Go 在语言级别支持协程，叫<strong>goroutine</strong>。Go 语言标准库提供的所有系统调用操作（包括所有同步IO操作），都会出让CPU给其他goroutine。这让轻量级线程的切换管理不依赖于系统的线程和进程，也不需要依赖于CPU的核心数量。</p>
<p>有人把Go比作21世纪的C语言。第一是因为Go语言设计简单，第二，21世纪最重要的就是并行程序设计，而Go从语言层面就支持并发。同时，并发程序的内存管理有时候是非常复杂的，而Go语言提供了自动垃圾回收机制。</p>
<p>Go语言为并发编程而内置的上层API基于顺序通信进程模型CSP(communicating sequential processes)。这就意味着显式锁都是可以避免的，因为Go通过相对安全的通道发送和接受数据以实现同步，这大大地简化了并发程序的编写。</p>
<p>Go语言中的并发程序主要使用两种手段来实现。<code>goroutine</code>和<code>channel</code>。</p>
<p><strong>什么是Goroutine</strong></p>
<p>goroutine是Go语言并行设计的核心，有人称之为go程。 Goroutine从量级上看很像协程，它比线程更小，十几个goroutine可能体现在底层就是五六个线程，Go语言内部帮你实现了这些goroutine之间的内存共享。执行goroutine只需极少的栈内存(大概是4~5KB)，当然会根据相应的数据伸缩。也正因为如此，可同时运行成千上万个并发任务。goroutine比thread更易用、更高效、更轻便。</p>
<p>一般情况下，一个普通计算机跑几十个线程就有点负载过大了，但是同样的机器却可以轻松地让成百上千个goroutine进行资源竞争。</p>
<p><strong>创建Goroutine</strong></p>
<p>只需在函数调⽤语句前添加 <code>go</code> 关键字，就可创建并发执⾏单元。开发⼈员无需了解任何执⾏细节，调度器会自动将其安排到合适的系统线程上执行。</p>
<p>在并发编程中，我们通常想将一个过程切分成几块，然后让每个goroutine各自负责一块工作，当一个程序启动时，主函数在一个单独的goroutine中运行，我们叫它<code>main goroutine</code>。新的goroutine会用go语句来创建。而go语言的并发设计，让我们很轻松就可以达成这一目的。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newTask</span><span class="params">()</span></span> &#123;</span><br><span class="line">	i := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		i++</span><br><span class="line">		fmt.Printf(<span class="string">&quot;new Goroutine: i = %d\n&quot;</span>, i)</span><br><span class="line">		time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 创建一个go协程去执行newTask</span></span><br><span class="line">	<span class="keyword">go</span> newTask()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// main goroutine 循环打印</span></span><br><span class="line">	i := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		i++</span><br><span class="line">		fmt.Printf(<span class="string">&quot;main Goroutine: i = %d\n&quot;</span>, i)</span><br><span class="line">		time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">main Goroutine: i = 1</span><br><span class="line">new Goroutine: i = 1</span><br><span class="line">new Goroutine: i = 2</span><br><span class="line">main Goroutine: i = 2</span><br><span class="line">main Goroutine: i = 3</span><br><span class="line">new Goroutine: i = 3</span><br><span class="line">new Goroutine: i = 4</span><br><span class="line">main Goroutine: i = 4</span><br><span class="line">main Goroutine: i = 5</span><br><span class="line">new Goroutine: i = 5</span><br><span class="line">new Goroutine: i = 6</span><br><span class="line">main Goroutine: i = 6</span><br><span class="line">main Goroutine: i = 7</span><br><span class="line">new Goroutine: i = 7</span><br><span class="line">new Goroutine: i = 8</span><br><span class="line">main Goroutine: i = 8</span><br><span class="line">main Goroutine: i = 9</span><br><span class="line">new Goroutine: i = 9</span><br><span class="line">new Goroutine: i = 10</span><br><span class="line">main Goroutine: i = 10</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p><strong>Goroutine特性</strong></p>
<p><strong>主goroutine退出后，其它的工作goroutine也会自动退出</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newTask</span><span class="params">()</span></span> &#123;</span><br><span class="line">	i := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		i++</span><br><span class="line">		fmt.Printf(<span class="string">&quot;new Goroutine: i = %d\n&quot;</span>, i)</span><br><span class="line">		time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 创建一个go协程去执行newTask</span></span><br><span class="line">	<span class="keyword">go</span> newTask()</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;main goroutine exit&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">main goroutine <span class="built_in">exit</span></span><br></pre></td></tr></table></figure>

<p><strong>Goexit函数</strong></p>
<p>调用 <code>runtime.Goexit()</code> 将立即终止当前 goroutine 执⾏，调度器确保所有已注册 defer 延迟调用被执行。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;runtime&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;A.defer&quot;</span>)</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">			<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;B.defer&quot;</span>)</span><br><span class="line">			runtime.Goexit() <span class="comment">// 终止当前 goroutine, import &quot;runtime&quot;</span></span><br><span class="line">			fmt.Println(<span class="string">&quot;B&quot;</span>) <span class="comment">// 不会执行</span></span><br><span class="line">		&#125;()</span><br><span class="line"></span><br><span class="line">		fmt.Println(<span class="string">&quot;A&quot;</span>) <span class="comment">// 不会执行</span></span><br><span class="line">	&#125;() <span class="comment">//不要忘记()</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//死循环，目的不让主goroutine结束</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">B.defer</span><br><span class="line">A.defer</span><br><span class="line"><span class="built_in">exit</span> status 0xc000013a</span><br></pre></td></tr></table></figure>

<h3 id="Channel"><a href="#Channel" class="headerlink" title="Channel"></a>Channel</h3><p><strong>channel</strong>是Go语言中的一个核心类型，可以把它看成管道。并发核心单元通过它就可以发送或者接收数据进行通讯，这在一定程度上又进一步降低了编程的难度。</p>
<p>channel是一个数据类型，主要用来解决go程的同步问题以及go程之间数据共享（数据传递）的问题。</p>
<p>goroutine运行在相同的地址空间，因此访问共享内存必须做好同步。goroutine 奉行通过通信来共享内存，而不是共享内存来通信。</p>
<p>引⽤类型 channel可用于多个 goroutine 通讯。其内部实现了同步，确保并发安全。</p>
<p><img src="/img/loading.gif" data-original="/../images/Go/channel.png" alt="channel"></p>
<p><strong>定义channel变量</strong></p>
<p>和map类似，channel也一个对应make创建的底层数据结构的<strong>引用</strong>。</p>
<p>当我们复制一个channel或用于函数参数传递时，我们只是拷贝了一个channel引用，因此调用者和被调用者将引用同一个channel对象。和其它的引用类型一样，channel的零值也是<code>nil</code>。</p>
<p>定义一个channel时，也需要定义发送到channel的值的类型。channel可以使用内置的make()函数来创建：</p>
<p><strong>chan</strong>是创建channel所需使用的关键字。<strong>Type</strong>代表指定channel收发数据的类型。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span>(<span class="keyword">chan</span> Type)  <span class="comment">//等价于make(chan Type, 0)</span></span><br><span class="line"><span class="built_in">make</span>(<span class="keyword">chan</span> Type, capacity)</span><br></pre></td></tr></table></figure>

<p>当 参数capacity&#x3D; 0 时，channel 是无缓冲阻塞读写的；当capacity &gt; 0 时，channel 有缓冲、是非阻塞的，直到写满 capacity个元素才阻塞写入。</p>
<p>channel非常像生活中的管道，一边可以存放东西，另一边可以取出东西。channel通过操作符 <code>&lt;-</code> 来接收和发送数据，发送和接收数据语法：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">channel &lt;- value      <span class="comment">//发送value到channel</span></span><br><span class="line">&lt;-channel             <span class="comment">//接收并将其丢弃</span></span><br><span class="line">x := &lt;-channel        <span class="comment">//从channel中接收数据，并赋值给x</span></span><br><span class="line">x, ok := &lt;-channel    <span class="comment">//功能同上，同时检查通道是否已关闭或者是否为空</span></span><br></pre></td></tr></table></figure>

<p>默认情况下，channel接收和发送数据都是阻塞的，除非另一端已经准备好，这样就使得goroutine同步变的更加的简单，而<strong>不需要显式的lock</strong>。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;goroutine结束&quot;</span>)</span><br><span class="line"></span><br><span class="line">		fmt.Println(<span class="string">&quot;goroutine正在运行……&quot;</span>)</span><br><span class="line"></span><br><span class="line">		c &lt;- <span class="number">666</span> <span class="comment">// 将666发送到c</span></span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	num := &lt;-c <span class="comment">// 从c中接收数据，并赋值给num</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;num = &quot;</span>, num)</span><br><span class="line">	fmt.Println(<span class="string">&quot;main goroutine结束&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">goroutine正在运行……</span><br><span class="line">goroutine结束</span><br><span class="line">num =  666</span><br><span class="line">main goroutine结束</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://byurself.github.io/">byu_rself</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://byurself.github.io/byu_rself/af4eacf0.html">https://byurself.github.io/byu_rself/af4eacf0.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://byurself.github.io" target="_blank">byu_rself</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Golang/">Golang</a></div><div class="post_share"><div class="social-share" data-image="/img/avatar.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/loading.gif" data-original="/img/wechat.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/loading.gif" data-original="/img/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/byu_rself/5b9d4397.html" title="LC.P2409[统计共同度过的日子数]"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">LC.P2409[统计共同度过的日子数]</div></div></a></div><div class="next-post pull-right"><a href="/byu_rself/a9891f84.html" title="LC.P1157[子数组中占绝大多数的元素]"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">LC.P1157[子数组中占绝大多数的元素]</div></div></a></div></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/loading.gif" data-original="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">byu_rself</div><div class="author-info__description">努力努力！</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">583</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">104</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">17</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/byurself"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Golang%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="toc-number">1.</span> <span class="toc-text">Golang学习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Golang%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">Golang简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Golang%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">1.1.1.</span> <span class="toc-text">Golang的优势</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Golang%E9%80%82%E5%90%88%E5%81%9A%E4%BB%80%E4%B9%88"><span class="toc-number">1.1.2.</span> <span class="toc-text">Golang适合做什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Golang%E6%98%8E%E6%98%9F%E4%BD%9C%E5%93%81"><span class="toc-number">1.1.3.</span> <span class="toc-text">Golang明星作品</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Golang%E7%9A%84%E4%B8%8D%E8%B6%B3"><span class="toc-number">1.1.4.</span> <span class="toc-text">Golang的不足</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Golang%E8%AF%AD%E6%B3%95"><span class="toc-number">1.2.</span> <span class="toc-text">Golang语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E4%B8%AAGolang%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.2.1.</span> <span class="toc-text">第一个Golang程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E7%9A%84%E5%A3%B0%E6%98%8E"><span class="toc-number">1.2.2.</span> <span class="toc-text">变量的声明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E9%87%8F"><span class="toc-number">1.2.3.</span> <span class="toc-text">常量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.4.</span> <span class="toc-text">函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E9%92%88"><span class="toc-number">1.2.5.</span> <span class="toc-text">指针</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#defer"><span class="toc-number">1.2.6.</span> <span class="toc-text">defer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#slice"><span class="toc-number">1.2.7.</span> <span class="toc-text">slice</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#map"><span class="toc-number">1.2.8.</span> <span class="toc-text">map</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.2.9.</span> <span class="toc-text">面向对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#interface"><span class="toc-number">1.2.10.</span> <span class="toc-text">interface</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84reflect"><span class="toc-number">1.2.11.</span> <span class="toc-text">反射reflect</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93%E6%A0%87%E7%AD%BE"><span class="toc-number">1.2.12.</span> <span class="toc-text">结构体标签</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Golang%E9%AB%98%E9%98%B6"><span class="toc-number">1.3.</span> <span class="toc-text">Golang高阶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Goroutine"><span class="toc-number">1.3.1.</span> <span class="toc-text">Goroutine</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Channel"><span class="toc-number">1.3.2.</span> <span class="toc-text">Channel</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/byu_rself/ce98666.html" title="LC.P994[腐烂的橘子]">LC.P994[腐烂的橘子]</a><time datetime="2024-05-13T01:35:39.000Z" title="发表于 2024-05-13 09:35:39">2024-05-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/byu_rself/2e93b25.html" title="LC.P377[组合总和IV]">LC.P377[组合总和IV]</a><time datetime="2024-04-22T02:28:12.000Z" title="发表于 2024-04-22 10:28:12">2024-04-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/byu_rself/a2e34a14.html" title="LC.P216[组合总和III]">LC.P216[组合总和III]</a><time datetime="2024-04-22T01:56:29.000Z" title="发表于 2024-04-22 09:56:29">2024-04-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/byu_rself/649956.html" title="LC.P2312[卖木头块]">LC.P2312[卖木头块]</a><time datetime="2024-03-15T01:46:11.000Z" title="发表于 2024-03-15 09:46:11">2024-03-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/byu_rself/a2f3da6b.html" title="LC.P2789[合并后数组中的最大元素]">LC.P2789[合并后数组中的最大元素]</a><time datetime="2024-03-14T01:24:04.000Z" title="发表于 2024-03-14 09:24:04">2024-03-14</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2024 By byu_rself</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://byurself.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
  }

  btf.addModeChange('mermaid', runMermaid)

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'vDBwmLbCoeDXzg0h3RPXJceo-gzGzoHsz',
      appKey: 'ULAbVvd0pULg0jSSKwuam8ed',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/hibiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script>
        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(r){r.imageLazyLoadSetting.processImages=t;var e=r.imageLazyLoadSetting.isSPA,n=r.imageLazyLoadSetting.preloadRatio||1,c=a();function a(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(){e&&(c=a());for(var t,o=0;o<c.length;o++)0<=(t=(t=c[o]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(r.innerHeight*n||document.documentElement.clientHeight*n)&&function(){var t,e,n,a,i=c[o];e=function(){c=c.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(n=new Image,a=t.getAttribute("data-original"),n.onload=function(){t.src=a,t.removeAttribute("data-original"),e&&e()},t.src!==a&&(n.src=a))}()}function i(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",i),r.addEventListener("resize",i),r.addEventListener("orientationchange",i)}(this);</script></body></html>